(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[375],{3471:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/front-end/testing/stories",function(){return n(4277)}])},4277:function(e,t,n){"use strict";n.r(t),n.d(t,{__toc:function(){return d}});var o=n(3860),i=n(2836),r=n(7385),s=n(3834);n(5524);var a=n(4709);let d=[{depth:2,value:"Creating a storybook",id:"creating-a-storybook"},{depth:2,value:"Adding a story with Rest API mock override",id:"adding-a-story-with-rest-api-mock-override"},{depth:2,value:"Adding a story with component interaction",id:"adding-a-story-with-component-interaction"}];function _createMdxContent(e){let t=Object.assign({h1:"h1",p:"p",h2:"h2",code:"code",ol:"ol",li:"li",br:"br",a:"a"},(0,a.a)(),e.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{children:"Writing stories"}),"\n",(0,o.jsx)(t.p,{children:"Story - is a part of storybook file describing some behavior of testable component.\nThink of a storybook like of a components and stories like this component's modes.\nLets describe it on an example."}),"\n",(0,o.jsx)(t.h2,{id:"creating-a-storybook",children:"Creating a storybook"}),"\n",(0,o.jsxs)(t.p,{children:["As the story is a part of storybook lets create it first.\nAs you ",(0,o.jsx)(t.code,{children:"already aware"})," storybook is a .tsx file written in ",(0,o.jsx)(t.code,{children:"CSF 3.0 storybook format"}),"."]}),"\n",(0,o.jsx)(t.p,{children:"Assume that we want to create a component for viewing employee profile."}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"This displays an employee data taken from REST API by id from the URL"}),"\n",(0,o.jsx)(t.li,{children:"Shows loading indicator while profile data is fetching from the UI"}),"\n",(0,o.jsx)(t.li,{children:"If authenticated user role is administrator, the component shows an 'Edit' button opening profile data editing modal window"}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["So, lets create a storybook file.\n:::{code-block}",(0,o.jsx)(t.br,{}),"\n:emphasize-lines: 6\nfront/\n┗ @components/\n┣ EmployeeProfile/\n┃ ┣ index.ts\n┃ ┣ employee-profile.tsx\n┃ ┗ employee-profile.stories.tsx\n┣ ...\n:::"]}),"\n",(0,o.jsxs)(t.p,{children:[":::{seealso}\nLearn more about ",(0,o.jsx)(t.a,{href:"../overview/folder-structure",children:"folder structure best practices"}),"\n:::"]}),"\n",(0,o.jsxs)(t.p,{children:[":::{code-block} typescript\n:caption: The contents of the ",(0,o.jsx)(t.code,{children:"employee-profile.stories.tsx"}),"\n:linenos:"]}),"\n",(0,o.jsx)(t.p,{children:"import { EmployeeProfile } from './';"}),"\n",(0,o.jsx)(t.p,{children:"export default {\ntitle: 'Components/EmployeeProfile',\ncomponent: EmployeeProfile,\ndecorators: [\nwithRoutes(['/employee/123/scheduler', '/employee/:employeeId']),\nwithApi([ApiMock['api/employee/:employeeId']]),\nwithStore([withStore([withAuthState({ role: TUserRole.USER })])]),\n],\n} as Meta;"}),"\n",(0,o.jsx)(t.p,{children:"export const Default: Meta = {};\n:::"}),"\n",(0,o.jsxs)(t.p,{children:["This is the minimum set up of our story. Check ",(0,o.jsx)(t.a,{href:"./storybook",children:"storybook"})," chapter for the deep explanation of the file's structure."]}),"\n",(0,o.jsxs)(t.p,{children:["Now the most interesting line for us is 13: ",(0,o.jsx)(t.code,{children:"export const Default: Meta = {};"}),"\nIt is default story. It is mandatory to have at least on named export from a storybook file for a default component view."]}),"\n",(0,o.jsxs)(t.p,{children:["At this step we already have our ",(0,o.jsx)(t.code,{children:"EmployeeProfile"})," component displayed in the storybook and we can continue it's development right there - inside a sandbox without need of a backend."]}),"\n",(0,o.jsx)(t.p,{children:"But lets write a few more meaningful stories to cover base functionality of the component."}),"\n",(0,o.jsx)(t.h2,{id:"adding-a-story-with-rest-api-mock-override",children:"Adding a story with Rest API mock override"}),"\n",(0,o.jsxs)(t.p,{children:["Assuming that we have this kind of api mock setup\n:::{code-block} typescript\n:caption: Rest api mock returning an employee profile data or waiting forever based on parameter\nexport const ResidentApi = {\n['api/employee/:employeeId']: ({ isLoading }) => rest.get(",(0,o.jsx)(t.code,{children:"api/employee/:employeeId"}),", (req, res, ctx) => {\nreturn isLoading ? res(ctx.delay('infinite'))) : res(ctx.json({\nname: 'John Smith',\nposition: 'Senior Web Developer',\ndepartment: 'R&D'\n}));\n})\n};\n:::"]}),"\n",(0,o.jsx)(t.p,{children:"Lets write a story to check if our component displays the loading indicator properly"}),"\n",(0,o.jsx)(t.p,{children:":::{code-block} typescript\n:caption: The story overrides the default api mock\n:linenos:"}),"\n",(0,o.jsx)(t.p,{children:"export const Loading: Meta = {\ndecorators: [\nwithApi([() => ApiMock['api/employee/:employeeId']({ isLoading: true })]),\n],\n};\n:::"}),"\n",(0,o.jsx)(t.p,{children:"That simple! We only need to cover parameters that differs from the default configuration."}),"\n",(0,o.jsx)(t.h2,{id:"adding-a-story-with-component-interaction",children:"Adding a story with component interaction"}),"\n",(0,o.jsx)(t.p,{children:"Lets create a story for displaying employee's profile data for the administrator with possibility to open profile data editing modal by pressing a button 'Edit'"}),"\n",(0,o.jsx)(t.p,{children:":::{code-block} typescript\n:caption: The story for the user 'admin'. Changing the redux state storing the user's role and implementing play function for component interaction\n:linenos:"}),"\n",(0,o.jsx)(t.p,{children:"export const Admin: Meta = {\ndecorators: [\nwithStore([withStore([withAuthState({ role: TUserRole.ADMIN })])]),\n],\nplay: ({ canvasElement }: { canvasElement: HTMLElement }) => {\nconst canvas = within(canvasElement);\nconst editButton = await canvas.findByText('Edit');\nawait userEvent.click(editButton);\n}\n};\n:::"}),"\n",(0,o.jsx)(t.p,{children:"Now opening the storybook and navigating to the Components/EmployeeProfile folder we should have these three stories:"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"The Default one. Displaying employee's profile data for user authenticated with role TUserRole.USER"}),"\n",(0,o.jsx)(t.li,{children:"Loading. Displaying infinite animated loading indicator"}),"\n",(0,o.jsx)(t.li,{children:"Admin. Displaying and clicking 'Edit' button in addition to the employee's profile for user authenticated with role TUserRole.ADMIN"}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"This is the very basic functional of the stories. But it is enough for developing and testing purposes."}),"\n",(0,o.jsxs)(t.p,{children:[":::{seealso}\nTo check more please visit ",(0,o.jsx)(t.a,{href:"https://storybook.js.org/docs/react/writing-stories/introduction",children:"official docs"})," page\n:::"]})]})}let c={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}=Object.assign({},(0,a.a)(),e.components);return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/front-end/testing/stories.md",route:"/front-end/testing/stories",pageMap:[{kind:"Meta",data:{"front-end":{title:"Front End"},about:{title:"About",type:"page"},contact:{title:"Contact ↗",type:"page",href:"https://twitter.com/shuding_",newWindow:!0},advanced:"Advanced",another:"Another",index:"Index"}},{kind:"MdxPage",name:"about",route:"/about"},{kind:"MdxPage",name:"advanced",route:"/advanced"},{kind:"MdxPage",name:"another",route:"/another"},{kind:"Folder",name:"front-end",route:"/front-end",children:[{kind:"Meta",data:{css:{title:"Css",theme:{typesetting:"article"}},react:{title:"React",theme:{typesetting:"article"}},links:"Links",plugins:"Plugins"}},{kind:"Folder",name:"css",route:"/front-end/css",children:[{kind:"MdxPage",name:"stylesheets",route:"/front-end/css/stylesheets"},{kind:"MdxPage",name:"tailwind-css",route:"/front-end/css/tailwind-css"},{kind:"MdxPage",name:"theme",route:"/front-end/css/theme"},{kind:"Meta",data:{stylesheets:"Stylesheets","tailwind-css":"Tailwind CSS",theme:"Theme"}}]},{kind:"MdxPage",name:"css",route:"/front-end/css"},{kind:"Folder",name:"data",route:"/front-end/data",children:[{kind:"Folder",name:"easy-peasy",route:"/front-end/data/easy-peasy",children:[{kind:"MdxPage",name:"best-practices",route:"/front-end/data/easy-peasy/best-practices"},{kind:"MdxPage",name:"data-storing",route:"/front-end/data/easy-peasy/data-storing"},{kind:"MdxPage",name:"index",route:"/front-end/data/easy-peasy"},{kind:"Meta",data:{"best-practices":"Best Practices","data-storing":"Data Storing",index:"Index"}}]},{kind:"MdxPage",name:"index",route:"/front-end/data"},{kind:"Folder",name:"react-query",route:"/front-end/data/react-query",children:[{kind:"MdxPage",name:"data-fetching",route:"/front-end/data/react-query/data-fetching"},{kind:"MdxPage",name:"index",route:"/front-end/data/react-query"},{kind:"MdxPage",name:"optimistic-updates",route:"/front-end/data/react-query/optimistic-updates"},{kind:"Meta",data:{"data-fetching":"Data Fetching",index:"Index","optimistic-updates":"Optimistic Updates"}}]},{kind:"Meta",data:{index:"Index"}}]},{kind:"Folder",name:"forms",route:"/front-end/forms",children:[{kind:"MdxPage",name:"custom-components",route:"/front-end/forms/custom-components"},{kind:"MdxPage",name:"index",route:"/front-end/forms"},{kind:"MdxPage",name:"validation",route:"/front-end/forms/validation"},{kind:"MdxPage",name:"writing-forms",route:"/front-end/forms/writing-forms"},{kind:"Meta",data:{"custom-components":"Custom Components",index:"Index",validation:"Validation","writing-forms":"Writing Forms"}}]},{kind:"MdxPage",name:"links",route:"/front-end/links"},{kind:"Folder",name:"overview",route:"/front-end/overview",children:[{kind:"MdxPage",name:"best-practices",route:"/front-end/overview/best-practices"},{kind:"MdxPage",name:"folder-structure",route:"/front-end/overview/folder-structure"},{kind:"MdxPage",name:"project-setup",route:"/front-end/overview/project-setup"},{kind:"Meta",data:{"best-practices":"Best Practices","folder-structure":"Folder Structure","project-setup":"Project Setup"}}]},{kind:"MdxPage",name:"plugins",route:"/front-end/plugins"},{kind:"Folder",name:"react",route:"/front-end/react",children:[{kind:"Meta",data:{index:"Introduction","best-practices":"Best Practices"}},{kind:"MdxPage",name:"best-practices",route:"/front-end/react/best-practices"},{kind:"MdxPage",name:"index",route:"/front-end/react"}]},{kind:"Folder",name:"testing",route:"/front-end/testing",children:[{kind:"MdxPage",name:"best-practices",route:"/front-end/testing/best-practices"},{kind:"MdxPage",name:"coverage",route:"/front-end/testing/coverage"},{kind:"MdxPage",name:"index",route:"/front-end/testing"},{kind:"MdxPage",name:"links",route:"/front-end/testing/links"},{kind:"MdxPage",name:"mocks",route:"/front-end/testing/mocks"},{kind:"MdxPage",name:"snapshots",route:"/front-end/testing/snapshots"},{kind:"MdxPage",name:"stories",route:"/front-end/testing/stories"},{kind:"MdxPage",name:"storybook",route:"/front-end/testing/storybook"},{kind:"MdxPage",name:"writing-tests",route:"/front-end/testing/writing-tests"},{kind:"Meta",data:{"best-practices":"Best Practices",coverage:"Coverage",index:"Index",links:"Links",mocks:"Mocks",snapshots:"Snapshots",stories:"Stories",storybook:"Storybook","writing-tests":"Writing Tests"}}]},{kind:"Folder",name:"typescript",route:"/front-end/typescript",children:[{kind:"MdxPage",name:"best-practices",route:"/front-end/typescript/best-practices"},{kind:"MdxPage",name:"index",route:"/front-end/typescript"},{kind:"Meta",data:{"best-practices":"Best Practices",index:"Index"}}]}]},{kind:"MdxPage",name:"front-end",route:"/front-end"},{kind:"MdxPage",name:"index",route:"/"}],flexsearch:{codeblocks:!0},title:"Writing stories",headings:d},pageNextRoute:"/front-end/testing/stories",nextraLayout:r.ZP,themeConfig:s.Z};t.default=(0,i.j)(c)},3834:function(e,t,n){"use strict";var o=n(3860);n(1733);let i={logo:(0,o.jsx)("span",{children:"My Project"}),project:{link:"https://github.com/shuding/nextra-docs-template"},chat:{link:"https://discord.com"},docsRepositoryBase:"https://github.com/shuding/nextra-docs-template",footer:{text:"Nextra Docs Template"}};t.Z=i}},function(e){e.O(0,[774,37,888,179],function(){return e(e.s=3471)}),_N_E=e.O()}]);