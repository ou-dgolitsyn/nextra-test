(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[270],{2640:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/front-end/testing/storybook",function(){return n(213)}])},4989:function(e,t,n){"use strict";var o=n(1874);n(9953);let r={logo:(0,o.jsx)("span",{children:"My Project"}),project:{link:"https://github.com/shuding/nextra-docs-template"},chat:{link:"https://discord.com"},docsRepositoryBase:"https://github.com/shuding/nextra-docs-template",footer:{text:"Nextra Docs Template"}};t.Z=r},213:function(e,t,n){"use strict";n.r(t);var o=n(1874),r=n(5623),s=n(6696),i=n(4989);n(4167);var a=n(3641);n(6465);let d={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}=Object.assign({},(0,a.ah)(),e.components);return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)},pageOpts:{filePath:"pages/front-end/testing/storybook.md",route:"/front-end/testing/storybook",headings:[{depth:1,value:"Storybook",id:"storybook"},{depth:2,value:"The idea",id:"the-idea"},{depth:2,value:"File structure",id:"file-structure"},{depth:2,value:"Storybook arguments",id:"storybook-arguments"},{depth:2,value:"Storybook decorators",id:"storybook-decorators"},{depth:2,value:"Running a storybook",id:"running-a-storybook"}],pageMap:[{kind:"Meta",data:{index:"Introduction","front-end":{title:"Front End"},about:{title:"About",type:"page"},contact:{title:"Contact â†—",type:"page",href:"https://twitter.com/shuding_",newWindow:!0},advanced:"Advanced",another:"Another"}},{kind:"MdxPage",name:"about",route:"/about"},{kind:"MdxPage",name:"advanced",route:"/advanced"},{kind:"MdxPage",name:"another",route:"/another"},{kind:"Folder",name:"front-end",route:"/front-end",children:[{kind:"Meta",data:{index:"Introduction",react:{title:"React",theme:{typesetting:"article"}},links:"Links",plugins:"Plugins"}},{kind:"Folder",name:"css",route:"/front-end/css",children:[{kind:"MdxPage",name:"index",route:"/front-end/css"},{kind:"MdxPage",name:"stylesheets",route:"/front-end/css/stylesheets"},{kind:"MdxPage",name:"tailwind-css",route:"/front-end/css/tailwind-css"},{kind:"MdxPage",name:"theme",route:"/front-end/css/theme"},{kind:"Meta",data:{index:"Index",stylesheets:"Stylesheets","tailwind-css":"Tailwind CSS",theme:"Theme"}}]},{kind:"Folder",name:"data",route:"/front-end/data",children:[{kind:"Folder",name:"easy-peasy",route:"/front-end/data/easy-peasy",children:[{kind:"MdxPage",name:"best-practices",route:"/front-end/data/easy-peasy/best-practices"},{kind:"MdxPage",name:"data-storing",route:"/front-end/data/easy-peasy/data-storing"},{kind:"MdxPage",name:"index",route:"/front-end/data/easy-peasy"},{kind:"Meta",data:{"best-practices":"Best Practices","data-storing":"Data Storing",index:"Index"}}]},{kind:"MdxPage",name:"index",route:"/front-end/data"},{kind:"Folder",name:"react-query",route:"/front-end/data/react-query",children:[{kind:"MdxPage",name:"data-fetching",route:"/front-end/data/react-query/data-fetching"},{kind:"MdxPage",name:"index",route:"/front-end/data/react-query"},{kind:"MdxPage",name:"optimistic-updates",route:"/front-end/data/react-query/optimistic-updates"},{kind:"Meta",data:{"data-fetching":"Data Fetching",index:"Index","optimistic-updates":"Optimistic Updates"}}]},{kind:"Meta",data:{index:"Index"}}]},{kind:"Folder",name:"forms",route:"/front-end/forms",children:[{kind:"MdxPage",name:"custom-components",route:"/front-end/forms/custom-components"},{kind:"MdxPage",name:"index",route:"/front-end/forms"},{kind:"MdxPage",name:"validation",route:"/front-end/forms/validation"},{kind:"MdxPage",name:"writing-forms",route:"/front-end/forms/writing-forms"},{kind:"Meta",data:{"custom-components":"Custom Components",index:"Index",validation:"Validation","writing-forms":"Writing Forms"}}]},{kind:"MdxPage",name:"links",route:"/front-end/links"},{kind:"Folder",name:"overview",route:"/front-end/overview",children:[{kind:"MdxPage",name:"best-practices",route:"/front-end/overview/best-practices"},{kind:"MdxPage",name:"folder-structure",route:"/front-end/overview/folder-structure"},{kind:"MdxPage",name:"project-setup",route:"/front-end/overview/project-setup"},{kind:"Meta",data:{"best-practices":"Best Practices","folder-structure":"Folder Structure","project-setup":"Project Setup"}}]},{kind:"MdxPage",name:"plugins",route:"/front-end/plugins"},{kind:"Folder",name:"react",route:"/front-end/react",children:[{kind:"Meta",data:{index:"Introduction","best-practices":"Best Practices"}},{kind:"MdxPage",name:"best-practices",route:"/front-end/react/best-practices"},{kind:"MdxPage",name:"index",route:"/front-end/react"}]},{kind:"Folder",name:"testing",route:"/front-end/testing",children:[{kind:"MdxPage",name:"best-practices",route:"/front-end/testing/best-practices"},{kind:"MdxPage",name:"coverage",route:"/front-end/testing/coverage"},{kind:"MdxPage",name:"index",route:"/front-end/testing"},{kind:"MdxPage",name:"links",route:"/front-end/testing/links"},{kind:"MdxPage",name:"mocks",route:"/front-end/testing/mocks"},{kind:"MdxPage",name:"snapshots",route:"/front-end/testing/snapshots"},{kind:"MdxPage",name:"stories",route:"/front-end/testing/stories"},{kind:"MdxPage",name:"storybook",route:"/front-end/testing/storybook"},{kind:"MdxPage",name:"writing-tests",route:"/front-end/testing/writing-tests"},{kind:"Meta",data:{"best-practices":"Best Practices",coverage:"Coverage",index:"Index",links:"Links",mocks:"Mocks",snapshots:"Snapshots",stories:"Stories",storybook:"Storybook","writing-tests":"Writing Tests"}}]},{kind:"Folder",name:"typescript",route:"/front-end/typescript",children:[{kind:"MdxPage",name:"best-practices",route:"/front-end/typescript/best-practices"},{kind:"MdxPage",name:"index",route:"/front-end/typescript"},{kind:"Meta",data:{"best-practices":"Best Practices",index:"Index"}}]}]},{kind:"MdxPage",name:"front-end",route:"/front-end"},{kind:"MdxPage",name:"index",route:"/"}],flexsearch:{codeblocks:!0},title:"Storybook"},pageNextRoute:"/front-end/testing/storybook",nextraLayout:s.ZP,themeConfig:i.Z};function c(e){let t=Object.assign({h1:"h1",p:"p",a:"a",h2:"h2",code:"code",ul:"ul",li:"li",strong:"strong",blockquote:"blockquote"},(0,a.ah)(),e.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{children:"Storybook"}),"\n",(0,o.jsx)(t.p,{children:"Storybook is a tool for UI development. It makes development faster and easier by isolating components."}),"\n",(0,o.jsx)(t.p,{}),"\n",(0,o.jsxs)(t.p,{children:["We will use storybook as the base for our UI tests.\nYou can read more about storybook on ",(0,o.jsx)(t.a,{href:"https://storybook.js.org/docs/react/get-started/introduction",children:"official site"})]}),"\n",(0,o.jsx)(t.h2,{id:"the-idea",children:"The idea"}),"\n",(0,o.jsx)(t.p,{children:"Storybook is a sandbox where any UI component can be created separately without any backend resources with all dependencies mocked."}),"\n",(0,o.jsxs)(t.p,{children:["At the heart of a Storybook lies the idea of building an application's ",(0,o.jsx)(t.a,{href:"https://www.designbetter.co/design-systems-handbook/introducing-design-systems",children:"design-system"})," based on the conception of the ",(0,o.jsx)(t.a,{href:"https://www.componentdriven.org/",children:"component driven design"}),". Starting with smallest components, composing them up to fully functional application pages."]}),"\n",(0,o.jsx)(t.h2,{id:"file-structure",children:"File structure"}),"\n",(0,o.jsxs)(t.p,{children:["For a single component, the Storybook is a file ",(0,o.jsx)(t.code,{children:"component-name.stories.tsx"})," placed in the component's folder."]}),"\n",(0,o.jsxs)(t.p,{children:["The structure of the file itself is created according to the rules of ",(0,o.jsx)(t.a,{href:"https://storybook.js.org/blog/component-story-format-3-0/",children:"Component Story Format (CSF) 3.0"})]}),"\n",(0,o.jsx)(t.p,{children:"Let's look at an example of a typical storybook"}),"\n",(0,o.jsx)(t.p,{children:":::{code-block} typescript\n:linenos:"}),"\n",(0,o.jsxs)(t.p,{children:["export default {\ntitle: 'Components/PropertyInformation',\ncomponent: PropertyInformation,\ndecorators: [\nwithApi([(context) => ApiMock",(0,o.jsx)(t.a,{href:"context.args",children:"'PROPERTY=>GET:*/resident'"}),"]),\nwithStore([withPropertyState((context) => context.args as TResidentProperty)]),\n],\n} as Meta;"]}),"\n",(0,o.jsx)(t.p,{children:"export const Default: Meta = {\nargs: { ...propertyMock },\ndecorators: [withStore([withAuthState({ role: TUserRole.AGENT })])],\n};\n:::"}),"\n",(0,o.jsx)(t.p,{children:"These are parts that every storybook file should have:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["{guilabel}",(0,o.jsx)(t.code,{children:"line 1"})," Default export"]}),"\n",(0,o.jsxs)(t.li,{children:["{guilabel}",(0,o.jsx)(t.code,{children:"line 2"})," Title bar, which is split by / to create subfolders in components tree"]}),"\n",(0,o.jsxs)(t.li,{children:["{guilabel}",(0,o.jsx)(t.code,{children:"line 3"})," The component that needs to be mapped. Can be a test wrapper around a real component"]}),"\n",(0,o.jsxs)(t.li,{children:["{guilabel}",(0,o.jsx)(t.code,{children:"line 8"})," {code}",(0,o.jsx)(t.code,{children:"as Meta"})," - is needed for typescript to export stories properly"]}),"\n",(0,o.jsxs)(t.li,{children:["{guilabel}",(0,o.jsx)(t.code,{children:"line 10"})," {code}",(0,o.jsx)(t.code,{children:"export const ComponentName: Meta"})," - a story definition. Should have at least one."]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"Optional attributes include:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["{guilabel}",(0,o.jsx)(t.code,{children:"line 4-7"})," Common decorators for all stories"]}),"\n",(0,o.jsxs)(t.li,{children:["{guilabel}",(0,o.jsx)(t.code,{children:"line 12"})," Decorators for specific story"]}),"\n",(0,o.jsxs)(t.li,{children:["{guilabel}",(0,o.jsx)(t.code,{children:"line 12"})," Arguments of a story that will be passed to component and will be controllable via storybook controls"]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"storybook-arguments",children:"Storybook arguments"}),"\n",(0,o.jsx)(t.p,{children:"Arguments can be used to dynamically change props, slots, styles, inputs, etc. It allows Storybook and its addons to live edit components."}),"\n",(0,o.jsxs)(t.p,{children:["To read more about arguments see this ",(0,o.jsx)(t.a,{href:"https://storybook.js.org/docs/react/writing-stories/args",children:"documentation"})]}),"\n",(0,o.jsx)(t.h2,{id:"storybook-decorators",children:"Storybook decorators"}),"\n",(0,o.jsx)(t.p,{children:"When writing stories, decorators are typically used to wrap stories with extra markup or context mocking."}),"\n",(0,o.jsxs)(t.p,{children:["Decorator is a function of the form\n:::{code-block} jsx\n(Story: Story, storyContext: StoryContext) => ","\n:::"]}),"\n",(0,o.jsx)(t.p,{children:"AnyWrapperComponent can be a provider of any context or an arbitrary component."}),"\n",(0,o.jsxs)(t.p,{children:["However, it is assumed that the decorator does not affect the rendering of the story. To make changes to the DOM of a particular story, the ",(0,o.jsx)(t.strong,{children:"render"})," function must be declared explicitly see ",(0,o.jsx)(t.a,{href:"https://storybook.js.org/blog/component-story-format-3-0/",children:"CSF3 definition"}),"."]}),"\n",(0,o.jsx)(t.p,{children:"Decorators can be declared at three levels:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["At the configuration level, in ",(0,o.jsx)(t.code,{children:"global.config.js"})," (by default in ",(0,o.jsx)(t.code,{children:"preview.js"}),"). Such decorators will be applied to all stories."]}),"\n",(0,o.jsxs)(t.li,{children:['At the storybook level.\n:::{code-block} typescript\n:caption: "Rest API & Redux store mock decorators declared at the storybook level"\n:emphasize-lines: 2\nexport default {\ndecorators: [\nwithApi([(context) => ApiMock',(0,o.jsx)(t.a,{href:"context.args",children:"'PROPERTY=>GET:*/resident'"}),"]),\nwithStore([withPropertyState((context) => context.args as TResidentProperty)]),\n],\n} as Meta;\n:::"]}),"\n",(0,o.jsx)(t.li,{children:'At the story level\n:::{code-block} typescript\n:caption: "Redux store mock decorator declared at the story level"\n:emphasize-lines: 3\nexport const Default: Meta = {\nargs: { ...propertyMock },\ndecorators: [withStore([withAuthState({ role: TUserRole.AGENT })])],\n};\n:::'}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"At the story level, decorators of all levels will merge their behavior, unless they are specifically configured to override parent's level behavior."}),"\n",(0,o.jsxs)(t.p,{children:["You can read more about decorators in the ",(0,o.jsx)(t.a,{href:"https://storybook.js.org/docs/react/writing-stories/decorators",children:"documentation"})]}),"\n",(0,o.jsxs)(t.p,{children:["We will also take a closer look at the use of specific decorators in ",(0,o.jsx)(t.a,{href:"./mocks",children:"mocks"})," section."]}),"\n",(0,o.jsx)(t.h2,{id:"running-a-storybook",children:"Running a storybook"}),"\n",(0,o.jsxs)(t.p,{children:["Storybook is a typical static web-application built & run via webpack.\nStorybook's special ",(0,o.jsx)(t.code,{children:"webpack.config.js"})," is placed under ",(0,o.jsx)(t.code,{children:".storybook/webpack.config.js"})]}),"\n",(0,o.jsx)(t.p,{children:"To start storybook locally run the script"}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"yarn storybook"}),"\n"]})]})}t.default=(0,r.j)(d)}},function(e){e.O(0,[774,62,888,179],function(){return e(e.s=2640)}),_N_E=e.O()}]);